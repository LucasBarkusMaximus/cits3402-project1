//#include <omp.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define DIA 	0.000001
#define COL  	4400

/*
sort single column
generate neighborhoods & blocks
move onto next column
generate neighborhoods & blocks
append blocks to blocks list, sorting as you go
check collisions, store
etc etc
*/

// I/O read in data (columns)

// match columns with keys

// sort ascending values
int cmpfunc(const void * a, const void * b) {
    if(*(const float*)a < *(const float*)b)
        return -1;
    return *(const float*)a > *(const float*)b;
}

/*int structcompare(const void *a, const void *b) {
	float 
}*/

/*void sort (column) {
	void qsort(column, COLUMNLEN, sizeof(float), cmpfunc);
}*/

// generate neighbourhood

// find & make blocks

// determine signature

// create signature matrix (to store IDs in)

// store signature & rowID

// determine collisions

// make collision table


int main() {
	clock_t begin = clock();

	/*struct col_key {
		float col;
		int key;
	} col1 = {0.047039, 12135267736472};*/

	float column[] = {0.047039,0.037743,0.051712,0.034644,0.025803,0.024889,0.047446,
		0.036642,0.034733,0.032763,0.047296,0.049066,0.038966,0.053697,0.040588,0.049608,
		0.013098,0.015893,0.039974,0.050597,0.075258,0.039328,0.020582,0.049942,0.038174,
		0.038367,0.053623,0.052185,0.024079,0.035391,0.047697,0.042586,0.042109,0.035787,
		0.058472,0.05096,0.037975,0.049877,0.028452,0.007995,0.039085,0.051249,0.046469,
		0.057353,0.047353,0.049017,0.044297,0.050558,0.025991,0.03862,0.056388,0.05257,
		0.025197,0.043971,0.02531,0.034714,0.054099,0.043971,0.030867,0.030117,0.062971,
		0.039974,0.031296,0.043109,0.061987,0.031887,0.061691,0.043466,0.025739,0.04477,
		0.048064,0.042843,0.042289,0.031019,0.064265,0.037807,0.046826,0.041697,0.047482,
		0.053174,0.032744,0.029583,0.040156,0.054964,0.037397,0.045108,0.043971,0.030753,
		0.034549,0.028616,0.043971,0.027848,0.045354,0.048544,0.032245,0.042862,0.04852,
		0.073758,0.032432,0.051772,0.038397,0.045345,0.037457,0.028476,0.033752,0.015933,
		0.060767,0.037793,0.015228,0.041877,0.041954,0.048474,0.037309,0.066064,0.046108,
		0.04597,0.039603,0.032062,0.05809,0.047656,0.027482,0.047597,0.0456,0.047787,
		0.037842,0.054118,0.053691,0.046748,0.019304,0.046923,0.034427,0.046361,0.046258,
		0.049467,0.051988,0.051324,0.057105,0.051846,0.047635,0.029314,0.02968,0.048541,
		0.06971,0.043369,0.046032,0.039548,0.04104,0.047622,0.040202,0.052206,0.049292,
		0.0342,0.050406,0.054685,0.061559,0.042855,0.031979,0.045122,0.06437,0.00653,
		0.062574,0.038475,0.054285,0.061177,0.047478,0.034779,0.055963,0.052114,0.039085,
		0.042948,0.035298,0.037954,0.062477,0.065956,0.042154,0.030812,0.058921,0.03368,
		0.0338,0.037206,0.035528,0.021749,0.033697,0.037375,0.036361,0.044228,0.056351,
		0.043564,0.032425,0.045043,0.038747,0.048347,0.045336,0.054614,0.045037,0.045883,
		0.052346,0.033625,0.048857,0.033792,0.035526,0.034609,0.042696,0.069516,0.040155,
		0.043971,0.044732,0.030325,0.045303,0.023984,0.040522,0.047071,0.034496,0.043343,
		0.041972,0.031366,0.076535,0.032978,0.036504,0.050093,0.074473,0.021549,0.055768,
		0.046123,0.009053,0.053312,0.030535,0.046902,0.058628,0.072523,0.042342,0.053228,
		0.036056,0.062665,0.040499,0.056361,0.038197,0.041877,0.065502,0.038609,0.04899,
		0.027499,0.032465,0.043536,0.056283,0.045356,0.060856,0.031659,0.057295,0.023984,
		0.031549,0.040536,0.04104,0.048785,0.031526,0.042431,0.047353,0.046052,0.054667,
		0.037084,0.04064,0.04104,0.058004,0.042342,0.029765,0.052465,0.036133,0.032889,
		0.04341,0.068913,0.050957,0.04104,0.04123,0.029921,0.041469,0.037401,0.035177,
		0.007581,0.044199,0.067806,0.043971,0.05346,0.050549,0.035177,0.058519,0.052559,
		0.046045,0.030822,0.055696,0.029702,0.028965,0.048251,0.045859,0.053964,0.035989,
		0.043188,0.045416,0.02842,0.027639,0.04459,0.038517,0.07172,0.043971,0.036,0.039247,
		0.059921,0.043508,0.051412,0.038421,0.054914,0.026157,0.026908,0.026165,0.059913,
		0.044557,0.032664,0.068399,0.053097,0.024103,0.039057,0.054118,0.052936,0.047794,
		0.038858,0.035058,0.050567,0.04569,0.037876,0.047489,0.03023,0.057515,0.051839,
		0.037689,0.032676,0.042212,0.032538,0.064871,0.049182,0.061559,0.037095,0.033661,
		0.022586,0.045292,0.084278,0.023984,0.043971,0.068595,0.059197,0.024336,0.039315,
		0.058104,0.044285,0.04638,0.042059,0.032571,0.037287,0.044974,0.039974,0.033948,
		0.04089,0.043779,0.025473,0.043589,0.031256,0.027982,0.041716,0.042325,0.039716,
		0.057353,0.045212,0.041528,0.041232,0.041852,0.04631,0.031519,0.037158,0.020692,0.05042,
		0.022247,0.049692,0.02722,0.03571,0.044748,0.038527,0.043971,0.047679,0.038029,0.037689,
		0.047585,0.035177,0.049913,0.060221,0.043971,0.028827,0.054964,0.031569,0.043385,
		0.050496,0.037397,0.051299,0.055696,0.036349,0.023984,0.022086,0.043971,0.054736,
		0.023955,0.049144,0.049167,0.043199,0.039974,0.034142,0.044353,0.04325,0.054696,
		0.034681,0.037422,0.024216,0.044862,0.041424,0.040754,0.049521,0.060332,0.043971,
		0.058329,0.038475,0.049427,0.041624,0.045169,0.054964,0.049009,0.047557,0.04944,
		0.052071,0.052521,0.044569,0.041257,0.07586,0.059127,0.048368,0.059454,0.054813,
		0.057459,0.041972,0.024199,0.055963,0.046902,0.032455,0.06264,0.046826,0.019911,
		0.021985,0.057478,0.047073,0.044948,0.068295,0.043971,0.044923,0.030049,0.05483,
		0.043804,0.057761,0.043278,0.043407,0.029543,0.048339,0.043971,0.042247,0.051863,
		0.030487,0.047713,0.016489,0.055003,0.033824,0.021985,0.025624,0.047228,0.053469,
		0.045192,0.045098,0.057808,0.035663,0.059454,0.055318,0.049247,0.037689,0.052765,
		0.034918,0.028602,0.041941,0.039716,0.04774,0.039132,0.043768,0.050505,0.041322,
		0.049084,0.038694,0.035052,0.492147};

	int columnlen = sizeof(column) / sizeof(column[0]);

	for(int i = 0; i < columnlen; i++) {
		printf("%f\n", column[i]);
	}
	printf("\n");

	qsort(column, columnlen, sizeof(float), cmpfunc);

	for(int i = 0; i < columnlen; i++) {
		printf("%f\n", column[i]);
	}
	printf("\n");

	clock_t end = clock();
	double time_spent = (double)(end - begin) / CLOCKS_PER_SEC;

	printf("%d seconds", time_spent);

	return 0;
}

//gcc -fopenmp -o project1 project1.c -std=c99